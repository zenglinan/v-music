(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7878eb49"],{1257:function(t,a,s){"use strict";var n=s("5a25");s.n(n).a},"22f9":function(t,a,s){"use strict";var n=s("cc98");s.n(n).a},"510f":function(t,a,s){"use strict";s.d(a,"a",(function(){return e}));var n=s("5530"),i=s("2f62"),e={computed:Object(n.a)({},Object(i.c)(["playlist"])),mounted:function(){this.adjustPlaylist(this.playlist)},activated:function(){this.adjustPlaylist(this.playlist)},watch:{playlist:function(){this.adjustPlaylist(this.playlist)}},methods:{adjustPlaylist:function(t){throw Error("adjustPlaylist has not defined")}}}},"5a25":function(t,a,s){},"6c4f":function(t,a,s){t.exports=s.p+"img/avatar-loading.85723203.jpg"},"7f5c":function(t,a,s){"use strict";s.d(a,"a",(function(){return i})),s.d(a,"b",(function(){return e}));var n=s("a417");function i(t){var a=i.offset;return i.offset+=t,Object(n.a)({url:"/top/artists",params:{limit:t,offset:a}})}function e(t){return Object(n.a)({url:"/artists",params:{id:t}})}i.offset=0},b0c0:function(t,a,s){var n=s("83ab"),i=s("9bf2").f,e=Function.prototype,c=e.toString,r=/^\s*function ([^ (]*)/,o="name";!n||o in e||i(e,o,{configurable:!0,get:function(){try{return c.call(this).match(r)[1]}catch(t){return""}}})},b64b:function(t,a,s){var n=s("23e7"),i=s("7b0b"),e=s("df75");n({target:"Object",stat:!0,forced:s("d039")((function(){e(1)}))},{keys:function(t){return e(i(t))}})},b87b:function(t,a,s){"use strict";s.r(a);var n=(s("4160"),s("159b"),s("5530")),i=s("c18f"),e=s("7f5c"),c=s("f5de"),r=s("2f62"),o=s("6c4f"),l={name:"SingerDetail",data:function(){return{avatarUrl:o,songs:[]}},components:{NMusicList:i.a},computed:Object(n.a)({},Object(r.c)(["singer"])),created:function(){var t=this.$route.params.id;this._getSingerDetail(t)},watch:{singer:function(){var t=this.$route.params.id;this._getSingerDetail(t)}},methods:{_getSingerDetail:function(t){var a=this;Object(e.b)(t).then((function(t){a.songs.length=0,t.data.hotSongs.forEach((function(s){a.songs.push(Object(c.a)(s)),a.avatarUrl="".concat(t.data.artist[0].picUrl,"?param=300x300")}))}))}}},u=s("2877"),f=Object(u.a)(l,(function(){var t=this,a=t.$createElement;return(t._self._c||a)("n-music-list",{attrs:{avatarUrl:t.avatarUrl,songs:t.songs}})}),[],!1,null,"a0451fa2",null);a.default=f.exports},bc49:function(t,a,s){"use strict";var n={name:"NLoading",components:{NIcon:s("ee34").a}},i=(s("1257"),s("2877")),e=Object(i.a)(n,(function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("n-icon",{staticClass:"icon",attrs:{href:"loading"}})],1)}),[],!1,null,"228f4f51",null);a.a=e.exports},c18f:function(t,a,s){"use strict";var n,i=(s("d81d"),s("fb6a"),s("b64b"),s("5530")),e=s("2f62"),c=s("ee34"),r=s("47b9"),o=s("bc49"),l=s("4e4f"),u=s("510f"),f=10,h=100,d={name:"NMusicList",mixins:[u.a],props:{songs:{type:Array},avatarUrl:{type:String}},data:function(){return{scrollY:0}},components:{NIcon:c.a,NListItem:r.a,NLoading:o.a,NScroll:l.a},mounted:function(){this.bgImgHeight=this.$refs.bgImg.clientHeight,n="".concat(200-this.bgImgHeight),this.modifyStyle(this.$refs.list.$el,{top:"".concat(this.bgImgHeight,"px")})},computed:{bgStyle:function(){return"background-image:url(".concat(this.avatarUrl,")")}},watch:{scrollY:function(t){var a=Math.max(n,t);t<n?this.shrinkImgHeight():t>=0?this.enlargeImg(t):this.drawLayer(),this.modifyStyle(this.$refs.layer,{transform:"translate3d(0, ".concat(a,"px, 0)"),webkitTransform:"translate3d(0, ".concat(a,"px, 0)")})}},methods:Object(i.a)({adjustPlaylist:function(t){var a=t.length?"180px":"";this.$refs.list.$el.style.bottom=a,this.$refs.list.refresh()},back:function(){this.$router.go(-1)},listenToScroll:function(t,a){var s=a.maxScrollY;this.scrollY=t.y,this.scrollY<=s&&this.$emit("scrollToBottom")},shrinkImgHeight:function(){this.modifyStyle(this.$refs.bgImg,{paddingTop:0,height:"".concat(200,"px"),zIndex:h})},enlargeImg:function(t){var a=1+Math.abs(t/this.bgImgHeight);this.modifyStyle(this.$refs.bgImg,{transform:"scale(".concat(a,")"),webkitTransform:"scale(".concat(a,")"),zIndex:h})},drawLayer:function(){this.modifyStyle(this.$refs.bgImg,{paddingTop:"70%",height:0,zIndex:f})},modifyStyle:function(t,a){var s=t.style.display;t.style.display="none",Object.keys(a).map((function(s){t.style[s]=a[s]})),t.style.display=s},selectSong:function(t){this.playSong({playlist:this.songs.slice(),index:t})},playHotSongs:function(){this.playSong({playlist:this.songs.slice(),index:0})}},Object(e.b)(["playSong"]))},g=(s("22f9"),s("2877")),m=Object(g.a)(d,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"wrapper"},[s("div",{ref:"bgImg",staticClass:"desc",style:t.bgStyle},[s("header",[s("n-icon",{staticClass:"back",attrs:{href:"back"},on:{click:t.back}}),s("n-icon",{staticClass:"share",attrs:{href:"share"}})],1)]),s("div",{ref:"layer",staticClass:"layer"}),s("n-scroll",{ref:"list",staticClass:"scrollWrapper",attrs:{data:t.songs,"probe-type":3},on:{scroll:t.listenToScroll}},[s("div",{staticClass:"list"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.songs.length,expression:"songs.length !== 0"}],staticClass:"playAll",on:{click:t.playHotSongs}},[s("n-icon",{staticClass:"icon",attrs:{href:"pause_b"}}),s("span",[t._v("播放热门歌曲")])],1),t._l(t.songs,(function(a,n){return s("n-list-item",{key:n,staticClass:"listItem",attrs:{song:a.name,index:n,artist:a.artist,album:a.album},on:{click:t.selectSong}})}))],2)]),s("n-loading",{directives:[{name:"show",rawName:"v-show",value:!t.songs.length,expression:"!songs.length"}],staticClass:"loading"})],1)}),[],!1,null,"4eba2989",null);a.a=m.exports},cc98:function(t,a,s){},d4ec:function(t,a,s){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}s.d(a,"a",(function(){return n}))},f5de:function(t,a,s){"use strict";s.d(a,"a",(function(){return e})),s("b0c0");var n=s("d4ec"),i=function t(a){var s=a.id,i=a.name,e=a.album,c=a.artist,r=a.albumId,o=a.albumPic;Object(n.a)(this,t),this.id=s,this.name=i,this.album=e,this.artist=c,this.albumId=r,this.albumPic=o};function e(t){return new i({id:t.id,name:t.name,album:t.al.name,artist:t.ar[0].name,albumId:t.al.id,albumPic:t.al.picUrl})}}}]);
//# sourceMappingURL=chunk-7878eb49.e65d3676.js.map