(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4c62c856"],{"1a58":function(t,s,e){},4180:function(t,s,e){"use strict";var n=e("993c");e.n(n).a},"498a":function(t,s,e){"use strict";var n=e("23e7"),a=e("58a8").trim;n({target:"String",proto:!0,forced:e("c8d2")("trim")},{trim:function(){return a(this)}})},"510f":function(t,s,e){"use strict";e.d(s,"a",(function(){return r}));var n=e("5530"),a=e("2f62"),r={computed:Object(n.a)({},Object(a.c)(["playlist"])),mounted:function(){this.adjustPlaylist(this.playlist)},activated:function(){this.adjustPlaylist(this.playlist)},watch:{playlist:function(){this.adjustPlaylist(this.playlist)}},methods:{adjustPlaylist:function(t){throw Error("adjustPlaylist has not defined")}}}},"5ce0":function(t,s,e){},"67ab":function(t,s,e){"use strict";var n=e("5ce0");e.n(n).a},"993c":function(t,s,e){},a15b:function(t,s,e){"use strict";var n=e("23e7"),a=e("44ad"),r=e("fc6a"),i=e("a640"),c=[].join,l=a!=Object,o=i("join",",");n({target:"Array",proto:!0,forced:l||!o},{join:function(t){return c.call(r(this),void 0===t?",":t)}})},b0c0:function(t,s,e){var n=e("83ab"),a=e("9bf2").f,r=Function.prototype,i=r.toString,c=/^\s*function ([^ (]*)/,l="name";!n||l in r||a(r,l,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(t){return""}}})},b9ad:function(t,s,e){"use strict";var n=e("1a58");e.n(n).a},c106:function(t,s,e){"use strict";e.r(s);var n=(e("d81d"),e("498a"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"searchBox"},[e("n-icon",{staticClass:"back",attrs:{href:"back_b"},on:{click:t.back}}),e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.query},on:{input:function(s){s.target.composing||(t.query=s.target.value)}}}),e("n-icon",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],staticClass:"clear",attrs:{href:"clear"},on:{click:t.clear}})],1),e("n-icon",{staticClass:"center",attrs:{href:"center"},on:{click:t.toCenter}})],1)}),a=e("ee34"),r={name:"NSearchBox",props:{filler:{type:String},placeholder:{type:String,default:"搜索歌曲、歌手"}},data:function(){return{query:""}},components:{NIcon:a.a},watch:{filler:function(t){""!==t&&(this.query=t)},query:function(){var t=null;return function(s){var e=this;t&&clearTimeout(t),t=setTimeout((function(){e.$emit("queryChange",s)}),500)}}()},methods:{clear:function(){this.query=""},back:function(){this.$router.go(-1)},toCenter:function(){}}},i=(e("67ab"),e("2877")),c=Object(i.a)(r,n,[],!1,null,"72aacb1b",null).exports,l=e("a417"),o=e("bc3a"),u=e.n(o);var f=(e("fb6a"),e("5530")),h=e("47b9"),d=e("2f62"),p=e("4e4f"),m=e("510f"),g={name:"Suggest",props:{result:{type:Object}},mixins:[m.a],components:{NListItem:h.a,NIcon:a.a,NScroll:p.a},computed:{songData:function(){return this.result.songs?this.result.songs:[]}},methods:Object(f.a)({selectSong:function(t){this.clearSong(),this.playSong({playlist:this.result.songs.slice(),index:t})},playAll:function(){this.playSong({playlist:this.result.songs.slice(),index:0})},onImgLoad:function(){this.$refs.scroll.refresh()},adjustPlaylist:function(t){var s=t.length?"180px":"";this.$refs.scroll.$el.style.bottom=s,this.$refs.scroll.refresh()},toSinger:function(t){this.$router.push({path:"/singer/".concat(t.id)}),this.setSinger(t)},toPlaylist:function(t){this.$router.push("/recommand/".concat(t))}},Object(d.d)({setSinger:"SET_SIGNER"}),{},Object(d.b)(["playSong","clearSong"]))},y=(e("b9ad"),Object(i.a)(g,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"suggest"},[e("n-scroll",{ref:"scroll",staticClass:"scrollWrapper",attrs:{data:t.songData}},[e("div",{staticClass:"scrollContent"},[t.result.artists||t.result.playlists?e("div",{staticClass:"guess"},[e("p",{staticClass:"title"},[t._v("你可能感兴趣")]),e("ul",[t._l(t.result.artists,(function(s,n){return e("li",{key:"sr_"+n,staticClass:"singers",on:{click:function(e){return t.toSinger(s)}}},[e("img",{attrs:{src:s.picUrl+"?param=300x300",alt:""},on:{load:t.onImgLoad}}),e("p",{staticClass:"descript"},[t._v("歌手："+t._s(s.name)+" "),s.alias.length?e("span",[t._v("（"+t._s(s.alias[0])+"）")]):t._e()])])})),t._l(t.result.playlists,(function(s,n){return e("li",{key:"p_"+n,staticClass:"playlists",on:{click:function(e){return t.toPlaylist(s.id)}}},[e("img",{attrs:{src:s.coverImgUrl,alt:""},on:{load:t.onImgLoad}}),e("p",{staticClass:"descript"},[t._v("歌单："+t._s(s.name)+"（"+t._s(s.description)+"）")])])}))],2)]):t._e(),e("div",{staticClass:"songs"},[e("header",[e("h2",[t._v("单曲")]),e("div",{staticClass:"playAll"},[e("n-icon",{attrs:{href:"pause_b"}}),e("span",{on:{click:t.playAll}},[t._v("播放全部")])],1)]),e("main",t._l(t.result.songs,(function(s,n){return e("n-list-item",{key:"s_"+n,attrs:{song:s.name,index:n,album:s.album,artist:s.artist,showId:!1},on:{click:t.selectSong}})})),1)])])])],1)}),[],!1,null,"70cc36e8",null)).exports,v=e("d4ec"),b=function t(s){var e=s.artists,n=s.playlists,a=s.songs;Object(v.a)(this,t),e&&(this.artists=e),n&&(this.playlists=n),this.songs=a};e("a15b");var _=e("f5de"),S={name:"Search",components:{NSearchBox:c,Suggest:y},data:function(){return{hotSearch:[],filler:"",query:"",result:{}}},created:function(){this._getHotSearch()},methods:{_getHotSearch:function(){var t=this;Object(l.a)({url:"/search/hot",params:{limit:10}}).then((function(s){t.hotSearch=s.data.result.hots}))},fill:function(t){this.filler=t},queryChange:function(t){this.query=t.trim(),this.query&&this._getSuggest(t)},_getSuggest:function(t){var s=this;(function(t){return u.a.all([Object(l.a)({url:"/search/suggest",params:{keywords:t}}),Object(l.a)({url:"/search",params:{keywords:t,limit:15}})])})(t).then((function(t){s.tempResult=function(t){var s={artists:t[0].artists,playlists:t[0].playlists,songs:t[1].songs};return new b(s)}([t[0].data.result,t[1].data.result])})).then((function(){return function(t){var s=t.join(",");return Object(l.a)({url:"song/detail",params:{ids:s}})}(s.tempResult.songs.map((function(t){return t.id})))})).then((function(t){s.tempResult.songs.length=0,t.data.songs.map((function(t){s.tempResult.songs.push(Object(_.a)(t))})),s.result=s.tempResult}))}}},j=(e("4180"),Object(i.a)(S,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search"},[e("n-search-box",{attrs:{filler:t.filler},on:{queryChange:t.queryChange}}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],staticClass:"hotSearch"},[e("h3",[t._v("热门搜索")]),e("ul",t._l(t.hotSearch,(function(s,n){return e("li",{key:n,on:{click:function(e){return t.fill(s.first)}}},[t._v(" "+t._s(s.first)+" ")])})),0)]),e("suggest",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],attrs:{result:t.result}})],1)}),[],!1,null,"11d20dba",null));s.default=j.exports},c8d2:function(t,s,e){var n=e("d039"),a=e("5899");t.exports=function(t){return n((function(){return!!a[t]()||"​᠎"!="​᠎"[t]()||a[t].name!==t}))}},d4ec:function(t,s,e){"use strict";function n(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}e.d(s,"a",(function(){return n}))},d81d:function(t,s,e){"use strict";var n=e("23e7"),a=e("b727").map,r=e("1dde"),i=e("ae40"),c=r("map"),l=i("map");n({target:"Array",proto:!0,forced:!c||!l},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},f5de:function(t,s,e){"use strict";e.d(s,"a",(function(){return r})),e("b0c0");var n=e("d4ec"),a=function t(s){var e=s.id,a=s.name,r=s.album,i=s.artist,c=s.albumId,l=s.albumPic;Object(n.a)(this,t),this.id=e,this.name=a,this.album=r,this.artist=i,this.albumId=c,this.albumPic=l};function r(t){return new a({id:t.id,name:t.name,album:t.al.name,artist:t.ar[0].name,albumId:t.al.id,albumPic:t.al.picUrl})}}}]);
//# sourceMappingURL=chunk-4c62c856.2d60fed1.js.map