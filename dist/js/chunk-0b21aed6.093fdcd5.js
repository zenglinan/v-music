(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0b21aed6"],{1257:function(t,a,n){"use strict";var s=n("5a25");n.n(s).a},"22f9":function(t,a,n){"use strict";var s=n("cc98");n.n(s).a},"510f":function(t,a,n){"use strict";n.d(a,"a",(function(){return e}));var s=n("5530"),i=n("2f62"),e={computed:Object(s.a)({},Object(i.c)(["playlist"])),mounted:function(){this.adjustPlaylist(this.playlist)},activated:function(){this.adjustPlaylist(this.playlist)},watch:{playlist:function(){this.adjustPlaylist(this.playlist)}},methods:{adjustPlaylist:function(t){throw Error("adjustPlaylist has not defined")}}}},"5a25":function(t,a,n){},"6c4f":function(t,a,n){t.exports=n.p+"img/avatar-loading.85723203.jpg"},a434:function(t,a,n){"use strict";var s=n("23e7"),i=n("23cb"),e=n("a691"),l=n("50c4"),o=n("7b0b"),r=n("65f0"),c=n("8418"),u=n("1dde"),f=n("ae40"),h=u("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,m=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!h||!d},{splice:function(t,a){var n,s,u,f,h,d,y=o(this),v=l(y.length),S=i(t,v),I=arguments.length;if(0===I?n=s=0:1===I?(n=0,s=v-S):(n=I-2,s=m(g(e(a),0),v-S)),v+n-s>p)throw TypeError(b);for(u=r(y,s),f=0;f<s;f++)(h=S+f)in y&&c(u,f,y[h]);if(u.length=s,n<s){for(f=S;f<v-s;f++)d=f+n,(h=f+s)in y?y[d]=y[h]:delete y[d];for(f=v;f>v-s+n;f--)delete y[f-1]}else if(n>s)for(f=v-s;f>S;f--)d=f+n-1,(h=f+s-1)in y?y[d]=y[h]:delete y[d];for(f=0;f<n;f++)y[f+S]=arguments[f+2];return y.length=v-s+n,u}})},b0c0:function(t,a,n){var s=n("83ab"),i=n("9bf2").f,e=Function.prototype,l=e.toString,o=/^\s*function ([^ (]*)/,r="name";!s||r in e||i(e,r,{configurable:!0,get:function(){try{return l.call(this).match(o)[1]}catch(t){return""}}})},b64b:function(t,a,n){var s=n("23e7"),i=n("7b0b"),e=n("df75");s({target:"Object",stat:!0,forced:n("d039")((function(){e(1)}))},{keys:function(t){return e(i(t))}})},bc49:function(t,a,n){"use strict";var s={name:"NLoading",components:{NIcon:n("ee34").a}},i=(n("1257"),n("2877")),e=Object(i.a)(s,(function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("n-icon",{staticClass:"icon",attrs:{href:"loading"}})],1)}),[],!1,null,"228f4f51",null);a.a=e.exports},c18f:function(t,a,n){"use strict";var s,i=(n("d81d"),n("fb6a"),n("b64b"),n("5530")),e=n("2f62"),l=n("ee34"),o=n("47b9"),r=n("bc49"),c=n("4e4f"),u=n("510f"),f=10,h=100,d={name:"NMusicList",mixins:[u.a],props:{songs:{type:Array},avatarUrl:{type:String}},data:function(){return{scrollY:0}},components:{NIcon:l.a,NListItem:o.a,NLoading:r.a,NScroll:c.a},mounted:function(){this.bgImgHeight=this.$refs.bgImg.clientHeight,s="".concat(200-this.bgImgHeight),this.modifyStyle(this.$refs.list.$el,{top:"".concat(this.bgImgHeight,"px")})},computed:{bgStyle:function(){return"background-image:url(".concat(this.avatarUrl,")")}},watch:{scrollY:function(t){var a=Math.max(s,t);t<s?this.shrinkImgHeight():t>=0?this.enlargeImg(t):this.drawLayer(),this.modifyStyle(this.$refs.layer,{transform:"translate3d(0, ".concat(a,"px, 0)"),webkitTransform:"translate3d(0, ".concat(a,"px, 0)")})}},methods:Object(i.a)({adjustPlaylist:function(t){var a=t.length?"180px":"";this.$refs.list.$el.style.bottom=a,this.$refs.list.refresh()},back:function(){this.$router.go(-1)},listenToScroll:function(t,a){var n=a.maxScrollY;this.scrollY=t.y,this.scrollY<=n&&this.$emit("scrollToBottom")},shrinkImgHeight:function(){this.modifyStyle(this.$refs.bgImg,{paddingTop:0,height:"".concat(200,"px"),zIndex:h})},enlargeImg:function(t){var a=1+Math.abs(t/this.bgImgHeight);this.modifyStyle(this.$refs.bgImg,{transform:"scale(".concat(a,")"),webkitTransform:"scale(".concat(a,")"),zIndex:h})},drawLayer:function(){this.modifyStyle(this.$refs.bgImg,{paddingTop:"70%",height:0,zIndex:f})},modifyStyle:function(t,a){var n=t.style.display;t.style.display="none",Object.keys(a).map((function(n){t.style[n]=a[n]})),t.style.display=n},selectSong:function(t){this.playSong({playlist:this.songs.slice(),index:t})},playHotSongs:function(){this.playSong({playlist:this.songs.slice(),index:0})}},Object(e.b)(["playSong"]))},g=(n("22f9"),n("2877")),m=Object(g.a)(d,(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"wrapper"},[n("div",{ref:"bgImg",staticClass:"desc",style:t.bgStyle},[n("header",[n("n-icon",{staticClass:"back",attrs:{href:"back"},on:{click:t.back}}),n("n-icon",{staticClass:"share",attrs:{href:"share"}})],1)]),n("div",{ref:"layer",staticClass:"layer"}),n("n-scroll",{ref:"list",staticClass:"scrollWrapper",attrs:{data:t.songs,"probe-type":3},on:{scroll:t.listenToScroll}},[n("div",{staticClass:"list"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.songs.length,expression:"songs.length !== 0"}],staticClass:"playAll",on:{click:t.playHotSongs}},[n("n-icon",{staticClass:"icon",attrs:{href:"pause_b"}}),n("span",[t._v("播放热门歌曲")])],1),t._l(t.songs,(function(a,s){return n("n-list-item",{key:s,staticClass:"listItem",attrs:{song:a.name,index:s,artist:a.artist,album:a.album},on:{click:t.selectSong}})}))],2)]),n("n-loading",{directives:[{name:"show",rawName:"v-show",value:!t.songs.length,expression:"!songs.length"}],staticClass:"loading"})],1)}),[],!1,null,"4eba2989",null);a.a=m.exports},cc98:function(t,a,n){},d4ec:function(t,a,n){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}n.d(a,"a",(function(){return s}))},d81d:function(t,a,n){"use strict";var s=n("23e7"),i=n("b727").map,e=n("1dde"),l=n("ae40"),o=e("map"),r=l("map");s({target:"Array",proto:!0,forced:!o||!r},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},f49a:function(t,a,n){"use strict";n.r(a);var s=(n("d81d"),n("a434"),n("5530")),i=n("c18f"),e=n("a417");var l=n("f5de"),o=n("2f62"),r=n("6c4f"),c={name:"SonglistDetail",data:function(){return{avatarUrl:r,songs:[],InvalidSongs:[]}},components:{NMusicList:i.a},created:function(){this._getSonglistDetail(this.$route.params.id)},computed:Object(s.a)({},Object(o.c)(["playing"])),methods:Object(s.a)({_getSonglistDetail:function(t){var a=this;(function(t){return Object(e.a)({url:"/playlist/detail",params:{id:t}})})(t).then((function(t){a.avatarUrl=t.data.playlist.coverImgUrl,a.InvalidSongs=t.data.playlist.tracks,a.getRealSongs()}))},getRealSongs:function(){var t=this;this.InvalidSongs.splice(0,30).map((function(a){t.songs.push(Object(l.a)(a))}))},getMore:function(){this.InvalidSongs.length&&(this.getRealSongs(),this.playing&&this.updatePlaylist(this.songs))}},Object(o.d)({updatePlaylist:"SET_PLAYLIST"}))},u=n("2877"),f=Object(u.a)(c,(function(){var t=this,a=t.$createElement;return(t._self._c||a)("n-music-list",{attrs:{songs:t.songs,avatarUrl:t.avatarUrl},on:{scrollToBottom:t.getMore}})}),[],!1,null,"593f3430",null);a.default=f.exports},f5de:function(t,a,n){"use strict";n.d(a,"a",(function(){return e})),n("b0c0");var s=n("d4ec"),i=function t(a){var n=a.id,i=a.name,e=a.album,l=a.artist,o=a.albumId,r=a.albumPic;Object(s.a)(this,t),this.id=n,this.name=i,this.album=e,this.artist=l,this.albumId=o,this.albumPic=r};function e(t){return new i({id:t.id,name:t.name,album:t.al.name,artist:t.ar[0].name,albumId:t.al.id,albumPic:t.al.picUrl})}}}]);
//# sourceMappingURL=chunk-0b21aed6.093fdcd5.js.map